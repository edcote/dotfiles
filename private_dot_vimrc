set nocompatible

" Plugins
execute pathogen#infect()

" Syntax highlighting
syntax on
filetype plugin indent off
" https://github.com/sonph/onehalf/tree/master/vim
colorscheme onehalfdark
if exists('+termguicolors')
  let &t_8f = "\<Esc>[38;2;%lu;%lu;%lum"
  let &t_8b = "\<Esc>[48;2;%lu;%lu;%lum"
  set t_Co=256
  set termguicolors
endif

" Whitespace
set shiftwidth=2
set tabstop=2
set expandtab
set noautoindent
set nosmartindent

set list
set listchars=tab:\>\ ,trail:.,extends:>,precedes:<

function TrimWhiteSpace()
  %s/\s*$//
  ''
endfunction

autocmd FileWritePre * call TrimWhiteSpace()
autocmd FileAppendPre * call TrimWhiteSpace()
autocmd FilterWritePre * call TrimWhiteSpace()
autocmd BufWritePre * call TrimWhiteSpace()

" Interface
set cursorline
set novisualbell
set ruler
set number
set laststatus=2
set nowrap

if has("gui_running")
  set guifont=Terminus\ Medium\ 11
endif

" Search options
set ignorecase
set hlsearch
set incsearch

" Key mapping
if &term == "screen-256color"
  map <Esc>[1;5D <C-Left>
  map <Esc>[1;5C <C-Right>
endif

noremap <C-d> :bdelete<CR>
noremap <C-n> :bnext<CR>
noremap <C-p> :bprev<CR>

" Save files when window loses focus
autocmd FocusLost * silent! wa
